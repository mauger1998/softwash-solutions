---
import Layout from '../layouts/Layout.astro'
import { getSanity } from '../lib/api'
import ServicesList from '../components/ServicesList.astro'

const returnedSections = await getSanity(`*[_type == 'servicesPage']`)
const services = await getSanity(`*[_type == 'services'] | order(orderRank asc)`)

const sections = returnedSections[0].sections
---

<Layout>
	{
		sections.map((section, index) => {
			let components = []
			if (index === 0) {
				components.push(<ServicesList services={services} />)
			}

			return components
		})
	}
</Layout>
